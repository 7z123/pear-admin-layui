<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>模板渲染</title>
		<link href="../../component/pear/css/pear.css" rel="stylesheet" />
		<style>
			.wrap {
				display: none;
			}
		</style>
	</head>
	<body class="pear-container">
		<div class="layui-row layui-col-space10">
			<div class="layui-col-md12">
				<div class="layui-card">
					<div class="layui-card-header">开发环境</div>
					<div class="layui-card-body">
						模板渲染示例.
					</div>
				</div>
			</div>
			<div class="layui-col-md12">
				<div class="layui-collapse">
					<div class="layui-colla-item">
						<h2 class="layui-colla-title">显示代码</h2>
						<div class="layui-colla-content">
							<pre class="layui-code" lay-encode="true">
								<script src="component/layui/layui.js"></script>
								 并
								<script src="component/pear/pear.js"></script>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="layui-col-md12">
				<div class="layui-card">
					<div class="layui-card-header">模板</div>
					<div class="layui-card-body">
						<button class="drawer-top pear-btn pear-btn-primary">渲染</button>	
                        <button class="tpl-file pear-btn pear-btn-primary">渲染</button>					
					</div>
                    <div id="tpl_show1"></div>
				</div>
			</div>
			<div class="layui-col-md12">
				<div class="layui-collapse">
					<div class="layui-colla-item">
						<h2 class="layui-colla-title">显示代码</h2>
						<div class="layui-colla-content">
							<pre class="layui-code" lay-encode="true">
								layui.use(['drawer'], function() {
									var drawer = layui.drawer;								
								    drawer.open({
								        direction: "right",
								        dom: ".layer-top",
								        distance: "30%"
								    });
								})
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="layui-col-md12">
				<div class="layui-card">
					<div class="layui-card-header">进阶</div>
					<div class="layui-card-body">
						<button class="drawer-close-mask pear-btn pear-btn-primary">手动关闭</button>
					</div>
				</div>
			</div>
			<div class="layui-col-md12">
				<div class="layui-collapse">
					<div class="layui-colla-item">
						<h2 class="layui-colla-title">显示代码</h2>
						<div class="layui-colla-content">
							<pre class="layui-code" lay-encode="true">
								var dom;								
								$(".drawer-close-mask").click(function() {
								    dom = drawer.open({
								        direction: "right",
								        dom: ".layer-close-mask",
								        distance: "30%",
								        maskClose: false
								    });
								})
								
								$("#btnClose").click(function() {
								    dom.close();
								})
								
							</pre>
						</div>
					</div>
				</div>
			</div>
			

			
			
			

	</body>
    <script type="text/html" id="demo">
        <h3>{{ d.title }}</h3>
    </script>

	<script src="../../component/layui/layui.js"></script>
	<script src="../../component/pear/pear.js"></script>
	<script>
		layui.use(['element', 'jquery', 'layer', 'code','laytpl'], function() {
			var element = layui.element;
			var $ = layui.jquery;
			var laytpl = layui.laytpl;
			var layer = layui.layer;

			layui.code();

            console.log(layui.setter);

            $(".drawer-top").click(function() {
                var data={title:'test'};
				var getTpl = demo.innerHTML
                ,view = document.getElementById('tpl_show1');                
                laytpl(getTpl).render(data, function(html){
                view.innerHTML = html;
                });
			})

            
                
            

            $(".tpl-file").click(function() {
                var data={title:'test'};
				var getTpl = ""
                ,view = document.getElementById('tpl_show1');      
                
                $.get("./tpl/tpl1.html",{},
                        function(response,status,xhr){
                                
                            laytpl(response).render(data, function(html){
                                view.innerHTML = html;
                                //console.log(layui.setter);
                                //console.log(layui);
                                element.render();

                            });
                        }
                        
                );



                
			})

            

			

		})
	</script>
</html>
